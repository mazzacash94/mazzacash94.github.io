<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Developer CV | NFT-Powered Resume</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.9.0/dist/web3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --accent: #06b6d4;
            --dark: #0f172a;
            --light: #f8fafc;
            --glass: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--dark);
            color: var(--light);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0.1;
        }

        .floating-shapes {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .shape {
            position: absolute;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            backdrop-filter: blur(20px);
            background: var(--glass);
            border-bottom: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 5px var(--primary)); }
            to { filter: drop-shadow(0 0 20px var(--secondary)); }
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--light);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .connect-wallet {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .connect-wallet:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5rem 5%;
            position: relative;
        }

        .hero-content {
            max-width: 1200px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .hero-text h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 3s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .typing-text {
            font-size: 1.5rem;
            color: var(--accent);
            margin-bottom: 2rem;
            height: 2rem;
        }

        .hero-cta {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-secondary {
            background: var(--glass);
            color: var(--light);
            border: 1px solid var(--border);
            backdrop-filter: blur(10px);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .hero-visual {
            position: relative;
        }

        .nft-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transform: perspective(1000px) rotateY(-15deg);
            transition: transform 0.6s ease;
        }

        .nft-card:hover {
            transform: perspective(1000px) rotateY(0deg);
        }

        .nft-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .nft-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, var(--accent), var(--primary));
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Sections */
        section {
            padding: 5rem 5%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-size: 3rem;
            margin-bottom: 3rem;
            text-align: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .skill-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .skill-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2);
        }

        .skill-category {
            font-size: 1.2rem;
            color: var(--accent);
            margin-bottom: 1rem;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .skill-bar {
            width: 100px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .skill-progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 3px;
            transition: width 1s ease;
        }

        /* Experience Timeline */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg, var(--primary), var(--secondary));
            transform: translateX(-50%);
        }

        .timeline-item {
            position: relative;
            padding: 2rem;
            width: calc(50% - 2rem);
            margin-bottom: 2rem;
        }

        .timeline-item:nth-child(odd) {
            left: 0;
            text-align: right;
        }

        .timeline-item:nth-child(even) {
            left: calc(50% + 2rem);
        }

        .timeline-content {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .timeline-content:hover {
            transform: scale(1.05);
            border-color: var(--primary);
        }

        .timeline-dot {
            position: absolute;
            top: 2rem;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            z-index: 1;
        }

        .timeline-item:nth-child(odd) .timeline-dot {
            right: -10px;
        }

        .timeline-item:nth-child(even) .timeline-dot {
            left: -10px;
        }

        /* Projects */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .project-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }

        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .project-header {
            padding: 2rem;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));
        }

        .project-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .project-tech {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .tech-tag {
            background: rgba(99, 102, 241, 0.2);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
        }

        .project-links {
            padding: 1rem 2rem;
            display: flex;
            gap: 1rem;
        }

        .project-link {
            color: var(--accent);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.3s ease;
        }

        .project-link:hover {
            color: var(--primary);
        }

        /* Blockchain Section */
        .blockchain-info {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .contract-address {
            font-family: 'Courier New', monospace;
            background: rgba(99, 102, 241, 0.1);
            padding: 1rem;
            border-radius: 10px;
            margin: 2rem 0;
            word-break: break-all;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .contract-address:hover {
            background: rgba(99, 102, 241, 0.2);
        }

        .blockchain-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            margin-top: 0.5rem;
        }

        /* Footer */
        footer {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border);
            padding: 3rem 5%;
            text-align: center;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .social-link {
            color: var(--light);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            color: var(--primary);
            transform: translateY(-5px);
        }

        /* Loading State */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-text h1 {
                font-size: 3rem;
            }

            .timeline::before {
                left: 2rem;
            }

            .timeline-item {
                width: calc(100% - 4rem);
                left: 4rem !important;
                text-align: left !important;
            }

            .timeline-dot {
                left: -29px !important;
                right: auto !important;
            }

            .blockchain-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation"></div>
    <div class="floating-shapes">
        <div class="shape" style="width: 300px; height: 300px; top: 10%; left: 10%;"></div>
        <div class="shape" style="width: 200px; height: 200px; top: 70%; right: 10%; animation-delay: -5s;"></div>
        <div class="shape" style="width: 150px; height: 150px; top: 40%; left: 50%; animation-delay: -10s;"></div>
    </div>

    <!-- Header -->
    <header>
        <nav>
            <div class="logo">CV.NFT</div>
            <div class="nav-links">
                <a href="#about">About</a>
                <a href="#experience">Experience</a>
                <a href="#skills">Skills</a>
                <a href="#projects">Projects</a>
                <a href="#blockchain">Blockchain</a>
                <button class="connect-wallet" onclick="connectWallet()">
                    <i class="fas fa-wallet"></i> Connect Wallet
                </button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h1 id="hero-name">Loading...</h1>
                <div class="typing-text">
                    <span id="typed-text"></span>
                </div>
                <p id="hero-bio">Fetching data from blockchain...</p>
                <div class="hero-cta">
                    <a href="#projects" class="btn btn-primary">
                        <i class="fas fa-code"></i> View Projects
                    </a>
                    <a href="#blockchain" class="btn btn-secondary">
                        <i class="fas fa-cube"></i> Verify on Chain
                    </a>
                </div>
            </div>
            <div class="hero-visual">
                <div class="nft-card">
                    <div class="nft-badge">NFT #1</div>
                    <h3>Blockchain Developer CV</h3>
                    <p>This resume lives on-chain as an NFT</p>
                    <div style="margin-top: 2rem;">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=YOUR_CONTRACT_ADDRESS" alt="Contract QR" style="width: 150px; height: 150px; border-radius: 10px;">
                    </div>
                    <div style="margin-top: 1rem;">
                        <a href="https://opensea.io/assets/ethereum/YOUR_CONTRACT_ADDRESS/1" target="_blank" class="btn btn-secondary" style="font-size: 0.9rem;">
                            View on OpenSea
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills">
        <h2 class="section-title">Technical Skills</h2>
        <div class="skills-grid" id="skills-container">
            <div class="loading"></div>
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience">
        <h2 class="section-title">Professional Experience</h2>
        <div class="timeline" id="experience-container">
            <div class="loading"></div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects">
        <h2 class="section-title">Featured Projects</h2>
        <div class="projects-grid" id="projects-container">
            <div class="loading"></div>
        </div>
    </section>

    <!-- Blockchain Section -->
    <section id="blockchain">
        <h2 class="section-title">Blockchain Verification</h2>
        <div class="blockchain-info">
            <h3>Smart Contract Details</h3>
            <div class="contract-address" onclick="copyAddress()">
                <i class="fas fa-copy"></i> <span id="contract-address">0x...</span>
            </div>
            <div class="blockchain-stats">
                <div class="stat-item">
                    <div class="stat-value" id="last-update">--</div>
                    <div class="stat-label">Last Updated</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="total-views">--</div>
                    <div class="stat-label">Total Views</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="network">--</div>
                    <div class="stat-label">Network</div>
                </div>
            </div>
            <div style="margin-top: 2rem;">
                <a href="#" id="etherscan-link" target="_blank" class="btn btn-primary">
                    <i class="fas fa-external-link-alt"></i> View on Etherscan
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="social-links">
            <a href="#" class="social-link" id="github-link"><i class="fab fa-github"></i></a>
            <a href="#" class="social-link" id="linkedin-link"><i class="fab fa-linkedin"></i></a>
            <a href="#" class="social-link" id="twitter-link"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-link" id="email-link"><i class="fas fa-envelope"></i></a>
        </div>
        <p>&copy; 2024 Blockchain CV NFT. Powered by Smart Contracts.</p>
    </footer>

    <script>
        // Configuration
        const CONTRACT_ADDRESS = 'YOUR_CONTRACT_ADDRESS'; // Inserisci qui l'indirizzo del contratto
        const CONTRACT_ABI = [
            // Inserisci qui l'ABI del contratto (puoi generarlo da Remix o Hardhat)
            // Per ora uso un ABI semplificato
            {
                "inputs": [],
                "name": "fullName",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "title",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "bio",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "github",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "linkedin",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "twitter",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "email",
                "outputs": [{"internalType": "string", "name": "", "type": "string"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getExperienceCount",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [{"internalType": "uint256", "name": "index", "type": "uint256"}],
                "name": "getExperience",
                "outputs": [
                    {
                        "components": [
                            {"internalType": "string", "name": "company", "type": "string"},
                            {"internalType": "string", "name": "role", "type": "string"},
                            {"internalType": "string", "name": "startDate", "type": "string"},
                            {"internalType": "string", "name": "endDate", "type": "string"},
                            {"internalType": "string", "name": "description", "type": "string"},
                            {"internalType": "string[]", "name": "techStack", "type": "string[]"}
                        ],
                        "internalType": "struct DeveloperCV.Experience",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getProjectCount",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [{"internalType": "uint256", "name": "index", "type": "uint256"}],
                "name": "getProject",
                "outputs": [
                    {
                        "components": [
                            {"internalType": "string", "name": "name", "type": "string"},
                            {"internalType": "string", "name": "description", "type": "string"},
                            {"internalType": "string", "name": "githubUrl", "type": "string"},
                            {"internalType": "string", "name": "liveUrl", "type": "string"},
                            {"internalType": "string[]", "name": "technologies", "type": "string[]"},
                            {"internalType": "bool", "name": "isActive", "type": "bool"}
                        ],
                        "internalType": "struct DeveloperCV.Project",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getSkillCategoryCount",
                "outputs": [{"internalType": "uint256", "name": "", "type": "uint256"}],
                "stateMutability": "view",
                "type": "function"
            },
            {
                "inputs": [{"internalType": "uint256", "name": "index", "type": "uint256"}],
                "name": "getSkillCategory",
                "outputs": [
                    {
                        "components": [
                            {"internalType": "string", "name": "category", "type": "string"},
                            {"internalType": "string[]", "name": "skills", "type": "string[]"},
                            {"internalType": "uint8[]", "name": "proficiencyLevels", "type": "uint8[]"}
                        ],
                        "internalType": "struct DeveloperCV.SkillCategory",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function"
            }
        ];

        let web3;
        let contract;
        let userAccount;

        // Initialize Web3
        async function initWeb3() {
            // Per demo, usa dati mock se non c'è connessione
            if (typeof window.ethereum === 'undefined') {
                console.log('MetaMask not found, using demo data');
                loadDemoData();
                return;
            }

            try {
                web3 = new Web3(window.ethereum);
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                await loadDataFromContract();
            } catch (error) {
                console.error('Error initializing Web3:', error);
                loadDemoData();
            }
        }

        // Connect Wallet
        async function connectWallet() {
            if (typeof window.ethereum === 'undefined') {
                alert('Please install MetaMask to connect your wallet!');
                return;
            }

            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAccount = accounts[0];
                document.querySelector('.connect-wallet').innerHTML = 
                    `<i class="fas fa-check-circle"></i> ${userAccount.slice(0, 6)}...${userAccount.slice(-4)}`;
            } catch (error) {
                console.error('Error connecting wallet:', error);
            }
        }

        // Load data from contract
        async function loadDataFromContract() {
            try {
                // Load personal info
                const fullName = await contract.methods.fullName().call();
                const title = await contract.methods.title().call();
                const bio = await contract.methods.bio().call();
                const github = await contract.methods.github().call();
                const linkedin = await contract.methods.linkedin().call();
                const twitter = await contract.methods.twitter().call();
                const email = await contract.methods.email().call();

                // Update UI
                document.getElementById('hero-name').textContent = fullName;
                document.getElementById('hero-bio').textContent = bio;
                
                // Update social links
                if (github) document.getElementById('github-link').href = github;
                if (linkedin) document.getElementById('linkedin-link').href = linkedin;
                if (twitter) document.getElementById('twitter-link').href = twitter;
                if (email) document.getElementById('email-link').href = `mailto:${email}`;

                // Initialize typing animation
                new Typed('#typed-text', {
                    strings: [title, 'Smart Contract Developer', 'DeFi Engineer', 'Web3 Builder'],
                    typeSpeed: 50,
                    backSpeed: 30,
                    loop: true
                });

                // Load skills
                await loadSkills();
                
                // Load experience
                await loadExperience();
                
                // Load projects
                await loadProjects();

                // Update blockchain info
                updateBlockchainInfo();

            } catch (error) {
                console.error('Error loading contract data:', error);
                loadDemoData();
            }
        }

        // Load skills from contract
        async function loadSkills() {
            const skillsContainer = document.getElementById('skills-container');
            skillsContainer.innerHTML = '';

            try {
                const count = await contract.methods.getSkillCategoryCount().call();
                
                for (let i = 0; i < count; i++) {
                    const skillCategory = await contract.methods.getSkillCategory(i).call();
                    
                    const skillCard = document.createElement('div');
                    skillCard.className = 'skill-card';
                    
                    let skillsHTML = `<h3 class="skill-category">${skillCategory.category}</h3>`;
                    
                    for (let j = 0; j < skillCategory.skills.length; j++) {
                        const skill = skillCategory.skills[j];
                        const level = skillCategory.proficiencyLevels[j];
                        
                        skillsHTML += `
                            <div class="skill-item">
                                <span>${skill}</span>
                                <div class="skill-bar">
                                    <div class="skill-progress" style="width: ${level * 10}%"></div>
                                </div>
                            </div>
                        `;
                    }
                    
                    skillCard.innerHTML = skillsHTML;
                    skillsContainer.appendChild(skillCard);
                }
            } catch (error) {
                console.error('Error loading skills:', error);
            }
        }

        // Load experience from contract
        async function loadExperience() {
            const experienceContainer = document.getElementById('experience-container');
            experienceContainer.innerHTML = '';

            try {
                const count = await contract.methods.getExperienceCount().call();
                
                for (let i = 0; i < count; i++) {
                    const experience = await contract.methods.getExperience(i).call();
                    
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline-item';
                    
                    timelineItem.innerHTML = `
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <h3>${experience.role}</h3>
                            <h4 style="color: var(--accent); margin: 0.5rem 0;">${experience.company}</h4>
                            <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                                ${experience.startDate} - ${experience.endDate}
                            </p>
                            <p style="margin: 1rem 0;">${experience.description}</p>
                            <div class="project-tech">
                                ${experience.techStack.map(tech => 
                                    `<span class="tech-tag">${tech}</span>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                    
                    experienceContainer.appendChild(timelineItem);
                }
            } catch (error) {
                console.error('Error loading experience:', error);
            }
        }

        // Load projects from contract
        async function loadProjects() {
            const projectsContainer = document.getElementById('projects-container');
            projectsContainer.innerHTML = '';

            try {
                const count = await contract.methods.getProjectCount().call();
                
                for (let i = 0; i < count; i++) {
                    const project = await contract.methods.getProject(i).call();
                    
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    
                    projectCard.innerHTML = `
                        <div class="project-header">
                            <h3 class="project-title">${project.name}</h3>
                            ${project.isActive ? '<span style="color: #10b981; font-size: 0.9rem;">● Active</span>' : ''}
                            <p style="margin-top: 1rem; color: rgba(255,255,255,0.8);">
                                ${project.description}
                            </p>
                            <div class="project-tech">
                                ${project.technologies.map(tech => 
                                    `<span class="tech-tag">${tech}</span>`
                                ).join('')}
                            </div>
                        </div>
                        <div class="project-links">
                            ${project.githubUrl ? 
                                `<a href="${project.githubUrl}" target="_blank" class="project-link">
                                    <i class="fab fa-github"></i> Code
                                </a>` : ''
                            }
                            ${project.liveUrl ? 
                                `<a href="${project.liveUrl}" target="_blank" class="project-link">
                                    <i class="fas fa-external-link-alt"></i> Demo
                                </a>` : ''
                            }
                        </div>
                    `;
                    
                    projectsContainer.appendChild(projectCard);
                }
            } catch (error) {
                console.error('Error loading projects:', error);
            }
        }

        // Update blockchain info
        function updateBlockchainInfo() {
            document.getElementById('contract-address').textContent = CONTRACT_ADDRESS;
            document.getElementById('last-update').textContent = new Date().toLocaleDateString();
            document.getElementById('total-views').textContent = Math.floor(Math.random() * 1000) + 500;
            document.getElementById('network').textContent = 'Ethereum';
            document.getElementById('etherscan-link').href = `https://etherscan.io/address/${CONTRACT_ADDRESS}`;
        }

        // Copy contract address
        function copyAddress() {
            navigator.clipboard.writeText(CONTRACT_ADDRESS);
            alert('Contract address copied to clipboard!');
        }

        // Load demo data
        function loadDemoData() {
            // Demo data for when contract is not available
            document.getElementById('hero-name').textContent = 'Mario Rossi';
            document.getElementById('hero-bio').textContent = 'Blockchain Developer specializzato in Smart Contracts, DeFi e Web3. Costruisco il futuro decentralizzato, un blocco alla volta.';
            
            // Initialize typing animation
            new Typed('#typed-text', {
                strings: ['Blockchain Developer', 'Smart Contract Engineer', 'DeFi Specialist', 'Web3 Builder'],
                typeSpeed: 50,
                backSpeed: 30,
                loop: true
            });

            // Demo skills
            const skillsHTML = `
                <div class="skill-card">
                    <h3 class="skill-category">Blockchain</h3>
                    <div class="skill-item">
                        <span>Solidity</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 90%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>Web3.js/Ethers.js</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 85%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>Hardhat/Truffle</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 80%"></div>
                        </div>
                    </div>
                </div>
                <div class="skill-card">
                    <h3 class="skill-category">Frontend</h3>
                    <div class="skill-item">
                        <span>React.js</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 85%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>TypeScript</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 80%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>Next.js</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
                <div class="skill-card">
                    <h3 class="skill-category">Backend</h3>
                    <div class="skill-item">
                        <span>Node.js</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 80%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>IPFS</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 70%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span>GraphQL</span>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('skills-container').innerHTML = skillsHTML;

            // Demo experience
            const experienceHTML = `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>Senior Blockchain Developer</h3>
                        <h4 style="color: var(--accent); margin: 0.5rem 0;">DeFi Protocol XYZ</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                            2022 - Present
                        </p>
                        <p style="margin: 1rem 0;">
                            Lead developer per un protocollo DeFi con TVL di $50M+. 
                            Sviluppo smart contracts per lending, staking e governance.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Solidity</span>
                            <span class="tech-tag">Hardhat</span>
                            <span class="tech-tag">OpenZeppelin</span>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3>Blockchain Developer</h3>
                        <h4 style="color: var(--accent); margin: 0.5rem 0;">NFT Marketplace Inc.</h4>
                        <p style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">
                            2021 - 2022
                        </p>
                        <p style="margin: 1rem 0;">
                            Sviluppo di smart contracts ERC-721 e ERC-1155 per marketplace NFT.
                            Implementazione di royalties on-chain e meccanismi di auction.
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Solidity</span>
                            <span class="tech-tag">React</span>
                            <span class="tech-tag">IPFS</span>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('experience-container').innerHTML = experienceHTML;

            // Demo projects
            const projectsHTML = `
                <div class="project-card">
                    <div class="project-header">
                        <h3 class="project-title">DeFi Yield Aggregator</h3>
                        <span style="color: #10b981; font-size: 0.9rem;">● Active</span>
                        <p style="margin-top: 1rem; color: rgba(255,255,255,0.8);">
                            Protocollo che ottimizza automaticamente i rendimenti attraverso multiple piattaforme DeFi
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Solidity</span>
                            <span class="tech-tag">Chainlink</span>
                            <span class="tech-tag">React</span>
                        </div>
                    </div>
                    <div class="project-links">
                        <a href="#" class="project-link">
                            <i class="fab fa-github"></i> Code
                        </a>
                        <a href="#" class="project-link">
                            <i class="fas fa-external-link-alt"></i> Demo
                        </a>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-header">
                        <h3 class="project-title">NFT Staking Platform</h3>
                        <p style="margin-top: 1rem; color: rgba(255,255,255,0.8);">
                            Piattaforma per lo staking di NFT con rewards in token nativi
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Solidity</span>
                            <span class="tech-tag">OpenZeppelin</span>
                            <span class="tech-tag">Hardhat</span>
                        </div>
                    </div>
                    <div class="project-links">
                        <a href="#" class="project-link">
                            <i class="fab fa-github"></i> Code
                        </a>
                    </div>
                </div>
                <div class="project-card">
                    <div class="project-header">
                        <h3 class="project-title">DAO Governance System</h3>
                        <p style="margin-top: 1rem; color: rgba(255,255,255,0.8);">
                            Sistema di governance on-chain con proposals e voting mechanism
                        </p>
                        <div class="project-tech">
                            <span class="tech-tag">Solidity</span>
                            <span class="tech-tag">Governor</span>
                            <span class="tech-tag">Timelock</span>
                        </div>
                    </div>
                    <div class="project-links">
                        <a href="#" class="project-link">
                            <i class="fab fa-github"></i> Code
                        </a>
                        <a href="#" class="project-link">
                            <i class="fas fa-external-link-alt"></i> Demo
                        </a>
                    </div>
                </div>
            `;
            document.getElementById('projects-container').innerHTML = projectsHTML;

            updateBlockchainInfo();
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            initWeb3();
            
            // Animate skill bars on scroll
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const progressBars = entry.target.querySelectorAll('.skill-progress');
                        progressBars.forEach(bar => {
                            const width = bar.style.width;
                            bar.style.width = '0';
                            setTimeout(() => {
                                bar.style.width = width;
                            }, 100);
                        });
                    }
                });
            }, observerOptions);
            
            // Observe skill cards
            setTimeout(() => {
                document.querySelectorAll('.skill-card').forEach(card => {
                    observer.observe(card);
                });
            }, 1000);
        });

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Header scroll effect
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(15, 23, 42, 0.9)';
            } else {
                header.style.background = 'var(--glass)';
            }
        });
    </script>
</body>
</html>